<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mood Tracker App</title>
  <link rel="icon" href="logo.png" type="image/png">
  <link rel="manifest" href="manifest.json">
  <style>
    /* Base styles */
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      margin: 0;
      padding: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      background-color: #1e2a47;
      color: #f8f9f9;
    }

    .container {
      text-align: center;
      background-color: #2d3a64;
      padding: 30px;
      border-radius: 12px;
      box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);
      width: 350px;
      max-width: 100%;
    }

    h1 {
      font-size: 28px;
      margin-bottom: 20px;
      color: #f39c12;
    }

    .emoji {
      font-size: 50px;
      cursor: pointer;
      margin: 10px;
      transition: transform 0.2s ease;
    }

    .emoji:hover {
      transform: scale(1.2);
    }

    .feedback {
      font-size: 16px;
      margin-top: 15px;
      color: #f8f9f9;
    }

    .btn {
      margin-top: 20px;
      padding: 12px 30px;
      background-color: #f39c12;
      color: white;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      font-size: 18px;
      transition: background 0.3s ease;
    }

    .btn:hover {
      background-color: #e67e22;
    }

    /* History Button */
    .history-btn {
      margin-top: 20px;
      padding: 12px 30px;
      background-color: #6c5ce7;
      color: white;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      font-size: 18px;
    }

    .history-btn:hover {
      background-color: #5f27cd;
    }

    /* Note Button */
    .note-btn {
      margin-top: 20px;
      padding: 12px 30px;
      background-color: #f39c12;
      color: white;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      font-size: 18px;
    }

    .note-btn:hover {
      background-color: #e67e22;
    }

    /* Motivational Posts */
    .motivational-posts {
      margin-top: 30px;
      font-size: 16px;
      color: #f8f9f9;
    }

    .motivational-posts p {
      margin: 5px 0;
    }

    /* Privacy Policy Link */
    .privacy-link {
      margin-top: 20px;
      font-size: 14px;
      color: #f39c12;
      cursor: pointer;
    }

    /* Privacy Policy Modal */
    .modal {
      display: none;
      position: fixed;
      z-index: 1;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      overflow: auto;
      background-color: rgba(0, 0, 0, 0.4);
    }

    .modal-content {
      background-color: white;
      margin: 15% auto;
      padding: 20px;
      border-radius: 10px;
      width: 80%;
      max-width: 600px;
    }

    .close {
      color: #aaa;
      float: right;
      font-size: 28px;
      font-weight: bold;
    }

    .close:hover,
    .close:focus {
      color: black;
      text-decoration: none;
      cursor: pointer;
    }

    /* Notes Textarea */
    textarea {
      width: 100%;
      height: 150px;
      padding: 10px;
      margin-top: 10px;
      border-radius: 10px;
      border: 1px solid #ccc;
      background-color: #f7f7f7;
      font-size: 16px;
      color: #333;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Mood Tracker</h1>
    <p>Select your mood today:</p>
    <div>
      <span class="emoji" data-mood="happy" onclick="setMood('happy')">üòä</span>
      <span class="emoji" data-mood="neutral" onclick="setMood('neutral')">üòê</span>
      <span class="emoji" data-mood="sad" onclick="setMood('sad')">üòû</span>
      <span class="emoji" data-mood="anxious" onclick="setMood('anxious')">üò∞</span>
      <span class="emoji" data-mood="stressed" onclick="setMood('stressed')">üò£</span>
      <span class="emoji" data-mood="depressed" onclick="setMood('depressed')">üòî</span>
    </div>
    <div class="feedback" id="feedback">Feeling good? Let us know!</div>
    <button class="btn" onclick="saveMood()">Save Mood</button>

    <!-- History Button -->
    <button class="history-btn" onclick="viewHistory()">View Mood History</button>

    <!-- Note Button -->
    <button class="note-btn" onclick="openNotes()">Save Reflection</button>

    <!-- Notes Textarea -->
    <textarea id="notes" placeholder="Write your reflection here..."></textarea>

    <!-- Motivational Posts Section -->
    <div class="motivational-posts">
      <p><strong>Motivational Tip:</strong> "Take it one step at a time, and you'll see progress!"</p>
      <p><strong>Mental Health Tip:</strong> "Don't be afraid to ask for help. You're not alone."</p>
    </div>

    <!-- Privacy Policy Link -->
    <p class="privacy-link" onclick="showPrivacyPolicy()">Privacy Policy</p>
  </div>

  <!-- Privacy Policy Modal -->
  <div id="privacyModal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closePrivacyPolicy()">&times;</span>
      <h2>Privacy Policy</h2>
      <p>Your privacy is important to us. This app does not collect or store any personal data. The mood you select is stored locally on your device only, using your browser's local storage. We do not share or transfer your mood data to any third parties.</p>
      <p>If you have any concerns or questions, feel free to contact us at webdev031@gmail.com.</p>
    </div>
  </div>

  <script>
    let currentMood = '';
    let currentNotes = localStorage.getItem('userNotes') || '';

    // Set the mood
    function setMood(mood) {
      currentMood = mood;
      const feedback = document.getElementById('feedback');
      
      const moodFeedback = {
        happy: "That's awesome! You're feeling happy!",
        neutral: "Okay, you're feeling neutral.",
        sad: "Sorry you're feeling down. Hang in there!",
        anxious: "You're feeling anxious, take a deep breath.",
        stressed: "Take it easy, you're feeling stressed.",
        depressed: "Sorry you're feeling this way, take care of yourself."
      };

      feedback.textContent = moodFeedback[mood] || "How are you feeling today?";
    }

    // Save the mood to local storage
    function saveMood() {
      if (currentMood === '') {
        alert("Please select a mood first!");
      } else {
        alert(`Your mood has been saved as: ${currentMood}`);
        let history = JSON.parse(localStorage.getItem('moodHistory')) || [];
        history.push({ mood: currentMood, date: new Date().toLocaleDateString() });
        localStorage.setItem('moodHistory', JSON.stringify(history));
      }
    }

    // View the history of moods
    function viewHistory() {
      const history = JSON.parse(localStorage.getItem('moodHistory')) || [];
      if (history.length === 0) {
        alert("No mood history available.");
        return;
      }

      let historyText = "Your Mood History:\n\n";
      history.forEach(entry => {
        historyText += `${entry.date}: ${entry.mood}\n`;
      });

      alert(historyText);
    }

    // Note taking functionality
    function openNotes() {
      const userNotes = document.getElementById('notes').value;
      if (userNotes !== '') {
        currentNotes = userNotes;
        localStorage.setItem('userNotes', currentNotes);
        alert("Your reflection has been saved!");
      }
    }

    // Privacy Policy Modal
    function showPrivacyPolicy() {
      const modal = document.getElementById('privacyModal');
      modal.style.display = "block";
    }

    function closePrivacyPolicy() {
      const modal = document.getElementById('privacyModal');
      modal.style.display = "none";
    }

    // Close modal when user clicks outside
    window.onclick = function(event) {
      const modal = document.getElementById('privacyModal');
      if (event.target === modal) {
        modal.style.display = "none";
      }
    };

    // Register Service Worker
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('/service-worker.js')
          .then((registration) => {
            console.log('Service Worker registered with scope:', registration.scope);
          })
          .catch((error) => {
            console.error('Service Worker registration failed:', error);
          });
      });
    }
  </script>
</body>
</html>
